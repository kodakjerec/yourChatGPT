import{L as J,b as N,__tla as O}from"./Loding-b60f8cc9.js";import{_ as U,r as V,o as p,c as z,a as t,n as A,y as E,w as c,i as u,b as d,k as B,l as H,p as M,j as P,__tla as q}from"./index-af403d30.js";let g,G=Promise.all([(()=>{try{return O}catch{}})(),(()=>{try{return q}catch{}})()]).then(async()=>{const f={name:"translation",data(){return{prompt:"",isLoading:!1,isDragging:!1,decoder:new TextDecoder("utf-8"),result:""}},components:{Loding:J},methods:{handleFileSelect(s){this.isLoading=!0,this.result="";const a=s.target.files;if(!a)return;const l=a[0];this.uploadFile(l),s.target.value=""},handleDrop(s){var l;if(s.preventDefault(),this.isLoading)return;this.isLoading=!0,this.isDragging=!1,this.result="";const a=(l=s.dataTransfer)==null?void 0:l.files[0];a&&this.uploadFile(a)},async uploadFile(s){try{const{body:a,status:l}=await N(s,this.prompt);if(a){const o=a.getReader();let e=await this.readStream(o,l);l===200?this.result=e.text:this.result=e}}catch(a){this.result=a}finally{this.isLoading=!1}},async readStream(s,a){for(;;){const{done:l,value:o}=await s.read();if(l)break;const e=this.decoder.decode(o,{stream:!0});return a!==200?JSON.parse(e).error.message??e:JSON.parse(e)}}}},i=s=>(M("data-v-accd360f"),s=s(),P(),s),h={class:"w-full overflow-y-auto max-h-screen"},m={class:"h-full w-full"},b=i(()=>t("div",{class:"sticky top-0 pt-4 w-full h-12 bg-gray-100"},null,-1)),v={class:"w-full"},y={class:"flex flex-col"},w=["disabled"],x=i(()=>t("p",null,"Drag and drop files here",-1)),D=i(()=>t("p",null,[d("The audio file to translate to "),t("span",{class:"text-red-500 font-bold"},"english"),d(", in one of these formats: mp3, mp4, mpeg, mpga, m4a, wav, or webm.")],-1)),_=i(()=>t("p",{class:"text-red-500"},"Caution! \u201Cm4a\u201D has a few errors.",-1)),L=[x,D,_],S={for:"prompt",class:"text-gray-700 mb2 flex items-center"},F=i(()=>t("span",{class:"w-20"},"prompt",-1)),T=["disabled"],k={class:"w-full flex flex-col"},R={class:"flex"},j=["disabled"];function C(s,a,l,o,e,n){const I=V("Loding");return p(),z("div",h,[t("div",m,[b,t("div",v,[t("div",y,[t("input",{type:"file",ref:"fileInput",onChange:a[0]||(a[0]=(...r)=>n.handleFileSelect&&n.handleFileSelect(...r)),disabled:e.isLoading},null,40,w),t("div",{class:A(["border border-dashed border-blue-500 py-10 text-center",{dragging:e.isDragging}]),onDragover:a[1]||(a[1]=E(()=>{},["prevent"])),onDrop:a[2]||(a[2]=(...r)=>n.handleDrop&&n.handleDrop(...r)),onDragenter:a[3]||(a[3]=r=>e.isDragging=!0),onDragleave:a[4]||(a[4]=r=>e.isDragging=!1)},L,34)]),t("label",S,[F,c(t("input",{"onUpdate:modelValue":a[5]||(a[5]=r=>e.prompt=r),class:"input",id:"prompt",name:"prompt",disabled:e.isLoading,placeholder:"An optional text to guide the model's style or continue a previous audio segment. The prompt should be in English."},null,8,T),[[u,e.prompt,void 0,{number:!0,trim:!0,lazy:!0}]])])]),t("div",k,[t("p",R,[d("Translation Result "),e.isLoading?(p(),B(I,{key:0,class:"mt-1"})):H("",!0)]),c(t("textarea",{disabled:e.isLoading,"onUpdate:modelValue":a[6]||(a[6]=r=>e.result=r),class:"input w-full text-justify",rows:"18",placeholder:"Translation Result"},null,8,j),[[u,e.result]])])])])}g=U(f,[["render",C],["__scopeId","data-v-accd360f"]])});export{G as __tla,g as default};
