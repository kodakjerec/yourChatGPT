import{L as J,b as N,__tla as O}from"./Loding-5e09926d.js";import{_ as U,r as V,o as p,c as z,a as t,x as A,y as E,w as c,f as u,b as d,i as B,j as H,p as M,k as P,__tla as q}from"./index-3db64042.js";let g,G=Promise.all([(()=>{try{return O}catch{}})(),(()=>{try{return q}catch{}})()]).then(async()=>{const f={name:"translation",data(){return{prompt:"",isLoading:!1,isDragging:!1,decoder:new TextDecoder("utf-8"),result:""}},components:{Loding:J},methods:{handleFileSelect(s){this.isLoading=!0,this.result="";const e=s.target.files;if(!e)return;const l=e[0];this.uploadFile(l),s.target.value=""},handleDrop(s){var l;if(s.preventDefault(),this.isLoading)return;this.isLoading=!0,this.isDragging=!1,this.result="";const e=(l=s.dataTransfer)==null?void 0:l.files[0];e&&this.uploadFile(e)},async uploadFile(s){try{const{body:e,status:l}=await N(s,this.prompt);if(e){const n=e.getReader();let a=await this.readStream(n,l);l===200?this.result=a.text:this.result=a}}catch(e){this.result=e}finally{this.isLoading=!1}},async readStream(s,e){for(;;){const{done:l,value:n}=await s.read();if(l)break;const a=this.decoder.decode(n,{stream:!0});return e!==200?JSON.parse(a).error.message??a:JSON.parse(a)}}}},i=s=>(M("data-v-accd360f"),s=s(),P(),s),h={class:"w-full overflow-y-auto max-h-screen"},m={class:"h-full w-full"},b=i(()=>t("div",{class:"sticky top-0 pt-4 w-full h-12 bg-gray-100"},null,-1)),v={class:"w-full"},y={class:"flex flex-col"},w=["disabled"],x=i(()=>t("p",null,"Drag and drop files here",-1)),D=i(()=>t("p",null,[d("The audio file to translate to "),t("span",{class:"text-red-500 font-bold"},"english"),d(", in one of these formats: mp3, mp4, mpeg, mpga, m4a, wav, or webm.")],-1)),_=i(()=>t("p",{class:"text-red-500"},"Caution! \u201Cm4a\u201D has a few errors.",-1)),L=[x,D,_],S={for:"prompt",class:"text-gray-700 mb2 flex items-center"},F=i(()=>t("span",{class:"w-20"},"prompt",-1)),T=["disabled"],k={class:"w-full flex flex-col"},R={class:"flex"},j=["disabled"];function C(s,e,l,n,a,o){const I=V("Loding");return p(),z("div",h,[t("div",m,[b,t("div",v,[t("div",y,[t("input",{type:"file",ref:"fileInput",onChange:e[0]||(e[0]=(...r)=>o.handleFileSelect&&o.handleFileSelect(...r)),disabled:a.isLoading},null,40,w),t("div",{class:A(["border border-dashed border-blue-500 py-10 text-center",{dragging:a.isDragging}]),onDragover:e[1]||(e[1]=E(()=>{},["prevent"])),onDrop:e[2]||(e[2]=(...r)=>o.handleDrop&&o.handleDrop(...r)),onDragenter:e[3]||(e[3]=r=>a.isDragging=!0),onDragleave:e[4]||(e[4]=r=>a.isDragging=!1)},L,34)]),t("label",S,[F,c(t("input",{"onUpdate:modelValue":e[5]||(e[5]=r=>a.prompt=r),class:"input",id:"prompt",name:"prompt",disabled:a.isLoading,placeholder:"An optional text to guide the model's style or continue a previous audio segment. The prompt should be in English."},null,8,T),[[u,a.prompt,void 0,{number:!0,trim:!0,lazy:!0}]])])]),t("div",k,[t("p",R,[d("Translation Result "),a.isLoading?(p(),B(I,{key:0,class:"mt-1"})):H("",!0)]),c(t("textarea",{disabled:a.isLoading,"onUpdate:modelValue":e[6]||(e[6]=r=>a.result=r),class:"input w-full text-justify",rows:"18",placeholder:"Translation Result"},null,8,j),[[u,a.result]])])])])}g=U(f,[["render",C],["__scopeId","data-v-accd360f"]])});export{G as __tla,g as default};
